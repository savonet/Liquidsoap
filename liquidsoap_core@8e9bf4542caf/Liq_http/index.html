<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Liq_http (liquidsoap_core@8e9bf4542caf.Liq_http)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">liquidsoap_core@8e9bf4542caf</a> &#x00BB; Liq_http</nav><header class="odoc-preamble"><h1>Module <code><span>Liq_http</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#http-utils">HTTP Utils</a></li></ul></nav><div class="odoc-content"><h3 id="http-utils"><a href="#http-utils" class="anchor"></a>HTTP Utils</h3><div class="odoc-spec"><div class="spec type anchored" id="type-event"><a href="#type-event" class="anchor"></a><code><span><span class="keyword">type</span> event</span><span> = </span><span>[ </span></code><ol><li id="type-event.Write" class="def variant constructor anchored"><a href="#type-event.Write" class="anchor"></a><code><span>| </span><span>`Write</span></code></li><li id="type-event.Read" class="def variant constructor anchored"><a href="#type-event.Read" class="anchor"></a><code><span>| </span><span>`Read</span></code></li><li id="type-event.Both" class="def variant constructor anchored"><a href="#type-event.Both" class="anchor"></a><code><span>| </span><span>`Both</span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-socket"><a href="#type-socket" class="anchor"></a><code><span><span class="keyword">type</span> socket</span><span> =
  <span>&lt; typ : string
  ; transport : <a href="#type-transport">transport</a>
  ; file_descr : <span class="xref-unresolved">Unix</span>.file_descr
  ; wait_for : <span><span class="optlabel">?log</span>:<span>(<span>string <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-event">event</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> unit
  ; write : <span><span class="xref-unresolved">Stdlib</span>.Bytes.t <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int
  ; read : <span><span class="xref-unresolved">Stdlib</span>.Bytes.t <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int
  ; close : unit &gt;</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-server"><a href="#type-server" class="anchor"></a><code><span><span class="keyword">and</span> server</span><span> =
  <span>&lt; transport : <a href="#type-transport">transport</a>
  ; accept : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> <a href="#type-socket">socket</a> * <span class="xref-unresolved">Unix</span>.sockaddr &gt;</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-transport"><a href="#type-transport" class="anchor"></a><code><span><span class="keyword">and</span> transport</span><span> =
  <span>&lt; name : string
  ; protocol : string
  ; default_port : int
  ; connect : 
    <span><span class="optlabel">?bind_address</span>:string <span class="arrow">&#45;&gt;</span></span>
    <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
    <span><span class="optlabel">?prefer</span>:<span>[ `System_default <span>| `Ipv4</span> <span>| `Ipv6</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
    <span>string <span class="arrow">&#45;&gt;</span></span>
    <span>int <span class="arrow">&#45;&gt;</span></span>
    <a href="#type-socket">socket</a>
  ; server : <a href="#type-server">server</a> &gt;</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-uri"><a href="#type-uri" class="anchor"></a><code><span><span class="keyword">type</span> uri</span><span> = </span><span>{</span></code><ol><li id="type-uri.protocol" class="def record field anchored"><a href="#type-uri.protocol" class="anchor"></a><code><span>protocol : string;</span></code></li><li id="type-uri.host" class="def record field anchored"><a href="#type-uri.host" class="anchor"></a><code><span>host : string;</span></code></li><li id="type-uri.port" class="def record field anchored"><a href="#type-uri.port" class="anchor"></a><code><span>port : <span>int option</span>;</span></code></li><li id="type-uri.path" class="def record field anchored"><a href="#type-uri.path" class="anchor"></a><code><span>path : string;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-connect"><a href="#val-connect" class="anchor"></a><code><span><span class="keyword">val</span> connect : 
  <span><span class="optlabel">?bind_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?prefer</span>:<span>[ `System_default <span>| `Ipv4</span> <span>| `Ipv6</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Unix</span>.file_descr</span></code></div><div class="spec-doc"><p>Base unix connect</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-accept"><a href="#val-accept" class="anchor"></a><code><span><span class="keyword">val</span> accept : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Unix</span>.file_descr * <span class="xref-unresolved">Unix</span>.sockaddr</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_socket_default"><a href="#val-set_socket_default" class="anchor"></a><code><span><span class="keyword">val</span> set_socket_default : 
  <span><span class="label">read_timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">write_timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unix_transport"><a href="#val-unix_transport" class="anchor"></a><code><span><span class="keyword">val</span> unix_transport : <a href="#type-transport">transport</a></span></code></div><div class="spec-doc"><p>Unix transport and socket.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unix_socket"><a href="#val-unix_socket" class="anchor"></a><code><span><span class="keyword">val</span> unix_socket : <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> <a href="#type-socket">socket</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-user_agent"><a href="#val-user_agent" class="anchor"></a><code><span><span class="keyword">val</span> user_agent : string</span></code></div><div class="spec-doc"><p>User-agent for liquidsoap</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_url"><a href="#val-parse_url" class="anchor"></a><code><span><span class="keyword">val</span> parse_url : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-uri">uri</a></span></code></div><div class="spec-doc"><p>Split an URL into its components.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_url"><a href="#val-is_url" class="anchor"></a><code><span><span class="keyword">val</span> is_url : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Basic detection of whether a path is an HTTP url.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dirname"><a href="#val-dirname" class="anchor"></a><code><span><span class="keyword">val</span> dirname : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Url without the trailing filename.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-args_split"><a href="#val-args_split" class="anchor"></a><code><span><span class="keyword">val</span> args_split : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(string, string)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span></span></code></div><div class="spec-doc"><p>split arg=value&amp;arg2=value2 into (arg, value) Hashtbl.t</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span class="label">timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket">socket</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Read with timeout.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-really_read"><a href="#val-really_read" class="anchor"></a><code><span><span class="keyword">val</span> really_read : <span><span class="label">timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket">socket</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Read <code>len</code> bytes</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_chunked"><a href="#val-read_chunked" class="anchor"></a><code><span><span class="keyword">val</span> read_chunked : <span><span class="label">timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket">socket</a> <span class="arrow">&#45;&gt;</span></span> string * int</span></code></div><div class="spec-doc"><p>Read chunked data.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-auth"><a href="#type-auth" class="anchor"></a><code><span><span class="keyword">type</span> auth</span><span> = </span><span>{</span></code><ol><li id="type-auth.user" class="def record field anchored"><a href="#type-auth.user" class="anchor"></a><code><span>user : string;</span></code></li><li id="type-auth.password" class="def record field anchored"><a href="#type-auth.password" class="anchor"></a><code><span>password : string;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_auth"><a href="#val-parse_auth" class="anchor"></a><code><span><span class="keyword">val</span> parse_auth : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-auth">auth</a></span></code></div><div class="spec-doc"><p>Split authentication string. Raises <code>Not_found</code> if failed.</p></div></div></div></body></html>
