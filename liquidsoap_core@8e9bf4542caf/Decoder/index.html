<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Decoder (liquidsoap_core@8e9bf4542caf.Decoder)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">liquidsoap_core@8e9bf4542caf</a> &#x00BB; Decoder</nav><header class="odoc-preamble"><h1>Module <code><span>Decoder</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-log"><a href="#val-log" class="anchor"></a><code><span><span class="keyword">val</span> log : <a href="../Log/index.html#type-t">Log.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-file"><a href="#type-file" class="anchor"></a><code><span><span class="keyword">type</span> file</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-stream"><a href="#type-stream" class="anchor"></a><code><span><span class="keyword">type</span> stream</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-input"><a href="#type-input" class="anchor"></a><code><span><span class="keyword">type</span> input</span><span> = </span><span>{</span></code><ol><li id="type-input.read" class="def record field anchored"><a href="#type-input.read" class="anchor"></a><code><span>read : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-input.lseek" class="def record field anchored"><a href="#type-input.lseek" class="anchor"></a><code><span>lseek : <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> int)</span> option</span>;</span></code></li><li id="type-input.tell" class="def record field anchored"><a href="#type-input.tell" class="anchor"></a><code><span>tell : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> int)</span> option</span>;</span></code></li><li id="type-input.length" class="def record field anchored"><a href="#type-input.length" class="anchor"></a><code><span>length : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> int)</span> option</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fps"><a href="#type-fps" class="anchor"></a><code><span><span class="keyword">type</span> fps</span><span> = </span><span>{</span></code><ol><li id="type-fps.num" class="def record field anchored"><a href="#type-fps.num" class="anchor"></a><code><span>num : int;</span></code></li><li id="type-fps.den" class="def record field anchored"><a href="#type-fps.den" class="anchor"></a><code><span>den : int;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-buffer"><a href="#type-buffer" class="anchor"></a><code><span><span class="keyword">type</span> buffer</span><span> = </span><span>{</span></code><ol><li id="type-buffer.generator" class="def record field anchored"><a href="#type-buffer.generator" class="anchor"></a><code><span>generator : <a href="../Generator/index.html#type-t">Generator.t</a>;</span></code></li><li id="type-buffer.put_pcm" class="def record field anchored"><a href="#type-buffer.put_pcm" class="anchor"></a><code><span>put_pcm : <span><span class="optlabel">?field</span>:<a href="../Frame/index.html#type-field">Frame.field</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">samplerate</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Mm</span>.Audio.t <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li><li id="type-buffer.put_yuva420p" class="def record field anchored"><a href="#type-buffer.put_yuva420p" class="anchor"></a><code><span>put_yuva420p : <span><span class="optlabel">?field</span>:<a href="../Frame/index.html#type-field">Frame.field</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">fps</span>:<a href="#type-fps">fps</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Mm</span>.Video.Canvas.image <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-decoder"><a href="#type-decoder" class="anchor"></a><code><span><span class="keyword">type</span> decoder</span><span> = </span><span>{</span></code><ol><li id="type-decoder.decode" class="def record field anchored"><a href="#type-decoder.decode" class="anchor"></a><code><span>decode : <span><a href="#type-buffer">buffer</a> <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li><li id="type-decoder.eof" class="def record field anchored"><a href="#type-decoder.eof" class="anchor"></a><code><span>eof : <span><a href="#type-buffer">buffer</a> <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li><li id="type-decoder.seek" class="def record field anchored"><a href="#type-decoder.seek" class="anchor"></a><code><span>seek : <span>int <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-decoder.close" class="def record field anchored"><a href="#type-decoder.close" class="anchor"></a><code><span>close : <span>unit <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-file_decoder_ops"><a href="#type-file_decoder_ops" class="anchor"></a><code><span><span class="keyword">type</span> file_decoder_ops</span><span> = </span><span>{</span></code><ol><li id="type-file_decoder_ops.fread" class="def record field anchored"><a href="#type-file_decoder_ops.fread" class="anchor"></a><code><span>fread : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../Frame/index.html#type-t">Frame.t</a>;</span></code></li><li id="type-file_decoder_ops.remaining" class="def record field anchored"><a href="#type-file_decoder_ops.remaining" class="anchor"></a><code><span>remaining : <span>unit <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-file_decoder_ops.fseek" class="def record field anchored"><a href="#type-file_decoder_ops.fseek" class="anchor"></a><code><span>fseek : <span>int <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-file_decoder_ops.fclose" class="def record field anchored"><a href="#type-file_decoder_ops.fclose" class="anchor"></a><code><span>fclose : <span>unit <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-stream_decoder"><a href="#type-stream_decoder" class="anchor"></a><code><span><span class="keyword">type</span> stream_decoder</span><span> = <span><a href="#type-input">input</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-decoder">decoder</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-image_decoder"><a href="#type-image_decoder" class="anchor"></a><code><span><span class="keyword">type</span> image_decoder</span><span> = </span><span>{</span></code><ol><li id="type-image_decoder.image_decoder_priority" class="def record field anchored"><a href="#type-image_decoder.image_decoder_priority" class="anchor"></a><code><span>image_decoder_priority : <span>unit <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-image_decoder.check_image" class="def record field anchored"><a href="#type-image_decoder.check_image" class="anchor"></a><code><span>check_image : <span><a href="#type-file">file</a> <span class="arrow">&#45;&gt;</span></span> bool;</span></code></li><li id="type-image_decoder.decode_image" class="def record field anchored"><a href="#type-image_decoder.decode_image" class="anchor"></a><code><span>decode_image : <span><a href="#type-file">file</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Mm</span>.Video.Image.t;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-file_decoder"><a href="#type-file_decoder" class="anchor"></a><code><span><span class="keyword">type</span> file_decoder</span><span> =
  <span><span class="label">metadata</span>:<a href="../Frame/index.html#type-metadata">Frame.metadata</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-file_decoder_ops">file_decoder_ops</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-decoder_specs"><a href="#type-decoder_specs" class="anchor"></a><code><span><span class="keyword">type</span> decoder_specs</span><span> = </span><span>{</span></code><ol><li id="type-decoder_specs.priority" class="def record field anchored"><a href="#type-decoder_specs.priority" class="anchor"></a><code><span>priority : <span>unit <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-decoder_specs.file_extensions" class="def record field anchored"><a href="#type-decoder_specs.file_extensions" class="anchor"></a><code><span>file_extensions : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> option</span>;</span></code></li><li id="type-decoder_specs.mime_types" class="def record field anchored"><a href="#type-decoder_specs.mime_types" class="anchor"></a><code><span>mime_types : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> option</span>;</span></code></li><li id="type-decoder_specs.file_type" class="def record field anchored"><a href="#type-decoder_specs.file_type" class="anchor"></a><code><span>file_type : <span><span class="label">metadata</span>:<a href="../Frame/index.html#type-metadata">Frame.metadata</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Frame/index.html#type-content_type">Frame.content_type</a> option</span>;</span></code></li><li id="type-decoder_specs.file_decoder" class="def record field anchored"><a href="#type-decoder_specs.file_decoder" class="anchor"></a><code><span>file_decoder : <span><a href="#type-file_decoder">file_decoder</a> option</span>;</span></code></li><li id="type-decoder_specs.stream_decoder" class="def record field anchored"><a href="#type-decoder_specs.stream_decoder" class="anchor"></a><code><span>stream_decoder : <span><span>(<span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-stream_decoder">stream_decoder</a>)</span> option</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decoders"><a href="#val-decoders" class="anchor"></a><code><span><span class="keyword">val</span> decoders : <span><a href="#type-decoder_specs">decoder_specs</a> <a href="../Plug/index.html#type-t">Plug.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conf_decoder"><a href="#val-conf_decoder" class="anchor"></a><code><span><span class="keyword">val</span> conf_decoder : <span class="xref-unresolved">Dtools</span>.Conf.ut</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conf_mime_types"><a href="#val-conf_mime_types" class="anchor"></a><code><span><span class="keyword">val</span> conf_mime_types : <span class="xref-unresolved">Dtools</span>.Conf.ut</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conf_file_extensions"><a href="#val-conf_file_extensions" class="anchor"></a><code><span><span class="keyword">val</span> conf_file_extensions : <span class="xref-unresolved">Dtools</span>.Conf.ut</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conf_priorities"><a href="#val-conf_priorities" class="anchor"></a><code><span><span class="keyword">val</span> conf_priorities : <span class="xref-unresolved">Dtools</span>.Conf.ut</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conf_image_priorities"><a href="#val-conf_image_priorities" class="anchor"></a><code><span><span class="keyword">val</span> conf_image_priorities : <span class="xref-unresolved">Dtools</span>.Conf.ut</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-openfile"><a href="#val-openfile" class="anchor"></a><code><span><span class="keyword">val</span> openfile : <span>string <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Unix</span>.file_descr</span></code></div><div class="spec-doc"><p>Open file with readonly, cloexec and share delete on windows.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-test_file"><a href="#val-test_file" class="anchor"></a><code><span><span class="keyword">val</span> test_file : 
  <span><span class="label">log</span>:<a href="../Log/index.html#type-t">Log.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">extension</span>:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">mime</span>:<a href="#type-stream">stream</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">mimes</span>:<span><span><a href="#type-stream">stream</a> list</span> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">extensions</span>:<span><span>string list</span> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-stream">stream</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p>Test file extension and mime if available</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-can_decode_type"><a href="#val-can_decode_type" class="anchor"></a><code><span><span class="keyword">val</span> can_decode_type : <span><a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Test if we can decode for a content_type. This include cases where we know how to convert channel layout.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_file_decoder"><a href="#val-get_file_decoder" class="anchor"></a><code><span><span class="keyword">val</span> get_file_decoder : 
  <span><span class="label">metadata</span>:<a href="../Frame/index.html#type-metadata">Frame.metadata</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(string * <span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_decoder_ops">file_decoder_ops</a>)</span>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_stream_decoder"><a href="#val-get_stream_decoder" class="anchor"></a><code><span><span class="keyword">val</span> get_stream_decoder : 
  <span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-stream_decoder">stream_decoder</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-image_file_decoders"><a href="#val-image_file_decoders" class="anchor"></a><code><span><span class="keyword">val</span> image_file_decoders : <span><a href="#type-image_decoder">image_decoder</a> <a href="../Plug/index.html#type-t">Plug.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_image_file_decoder"><a href="#val-check_image_file_decoder" class="anchor"></a><code><span><span class="keyword">val</span> check_image_file_decoder : <span><a href="#type-file">file</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_image_file_decoder"><a href="#val-get_image_file_decoder" class="anchor"></a><code><span><span class="keyword">val</span> get_image_file_decoder : <span><a href="#type-file">file</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Mm</span>.Video.Image.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mk_buffer"><a href="#val-mk_buffer" class="anchor"></a><code><span><span class="keyword">val</span> mk_buffer : <span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Generator/index.html#type-t">Generator.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-buffer">buffer</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-file_decoder"><a href="#val-file_decoder" class="anchor"></a><code><span><span class="keyword">val</span> file_decoder : 
  <span><span class="label">filename</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">remaining</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-decoder">decoder</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-file_decoder_ops">file_decoder_ops</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-opaque_file_decoder"><a href="#val-opaque_file_decoder" class="anchor"></a><code><span><span class="keyword">val</span> opaque_file_decoder : 
  <span><span class="label">filename</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-input">input</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-decoder">decoder</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-file_decoder_ops">file_decoder_ops</a></span></code></div></div></div></body></html>
