<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>source (liquidsoap_core@8e9bf4542caf.Source.source)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">liquidsoap_core@8e9bf4542caf</a> &#x00BB; <a href="../index.html">Source</a> &#x00BB; source</nav><header class="odoc-preamble"><h1>Class <code><span>Source.source</span></code></h1><p>The <code>source</code> use is to send data frames through the <code>get</code> method.</p></header><nav class="odoc-toc"><ul><li><a href="#naming">Naming</a></li><li><a href="#source-characteristics">Source characteristics</a></li><li><a href="#init/shutdown">Init/shutdown</a></li><li><a href="#streaming">Streaming</a></li><li><a href="#utilities">Utilities</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec method anchored" id="method-mutexify"><a href="#method-mutexify" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> mutexify : 'a 'b. <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><h2 id="naming"><a href="#naming" class="anchor"></a>Naming</h2><div class="odoc-spec"><div class="spec method anchored" id="method-id"><a href="#method-id" class="anchor"></a><code><span><span class="keyword">method</span> id : string</span></code></div><div class="spec-doc"><p>Identifier of the source.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-set_name"><a href="#method-set_name" class="anchor"></a><code><span><span class="keyword">method</span> set_name : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-set_id"><a href="#method-set_id" class="anchor"></a><code><span><span class="keyword">method</span> set_id : <span><span class="optlabel">?definitive</span>:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-pos"><a href="#method-pos" class="anchor"></a><code><span><span class="keyword">method</span> pos : <a href="../../../liquidsoap-lang/Liquidsoap_lang/Pos/Option/index.html#type-t">Pos.Option.t</a></span></code></div><div class="spec-doc"><p>Position in script</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-stack"><a href="#method-stack" class="anchor"></a><code><span><span class="keyword">method</span> stack : <span><a href="../../Pos/index.html#type-t">Pos.t</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-set_stack"><a href="#method-set_stack" class="anchor"></a><code><span><span class="keyword">method</span> set_stack : <span><span><a href="../../Pos/index.html#type-t">Pos.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-stack_unifier"><a href="#method-stack_unifier" class="anchor"></a><code><span><span class="keyword">method</span> stack_unifier : <span><span><a href="../../Pos/index.html#type-t">Pos.t</a> list</span> <a href="../../Unifier/index.html#type-t">Unifier.t</a></span></span></code></div></div><h2 id="source-characteristics"><a href="#source-characteristics" class="anchor"></a>Source characteristics</h2><div class="odoc-spec"><div class="spec method anchored" id="method-fallible"><a href="#method-fallible" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">virtual</span> fallible : bool</span></code></div><div class="spec-doc"><p>If <code>false</code>, <code>is_ready</code> should always return <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-source_type"><a href="#method-source_type" class="anchor"></a><code><span><span class="keyword">method</span> source_type : <a href="../index.html#type-source_type">source_type</a></span></code></div><div class="spec-doc"><p>The source type. Defaults to <code>`Passive</code></p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-active"><a href="#method-active" class="anchor"></a><code><span><span class="keyword">method</span> active : bool</span></code></div><div class="spec-doc"><p><code>true</code> if the source needs to be animated on each clock tick.</p></div></div><h2 id="init/shutdown"><a href="#init/shutdown" class="anchor"></a>Init/shutdown</h2><div class="odoc-spec"><div class="spec method anchored" id="method-on_sleep"><a href="#method-on_sleep" class="anchor"></a><code><span><span class="keyword">method</span> on_sleep : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Register a callback, to be executed when source shuts down.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-clock"><a href="#method-clock" class="anchor"></a><code><span><span class="keyword">method</span> clock : <a href="../../Clock/index.html#type-t">Clock.t</a></span></code></div><div class="spec-doc"><p>The clock under which the source will run.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-self_sync"><a href="#method-self_sync" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">virtual</span> self_sync : <a href="../../Clock/index.html#type-self_sync">Clock.self_sync</a></span></code></div><div class="spec-doc"><p>Does the source provide its own synchronization? Examples: Alsa, AO, SRT I/O, etc.. This information is used at the clock level to decide whether or not we should synchronize with the CPU clock after producing a frame (for <code>`Auto</code> clocks). Please note that in the case of multiple sources filling the frame with different notion notion of synchronization, there is no consistent notion of time or synchronization. In this case (and with a <code>`Auto</code> clock), we simply decide based on whether there is one <code>self_sync</code> source or not. This logic should dictate how the method is implemented by the various operators.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-source_sync"><a href="#method-source_sync" class="anchor"></a><code><span><span class="keyword">method</span> source_sync : <span>bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Clock/index.html#type-sync_source">Clock.sync_source</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-on_wake_up"><a href="#method-on_wake_up" class="anchor"></a><code><span><span class="keyword">method</span> on_wake_up : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Register a callback when wake_up is called.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-wake_up"><a href="#method-wake_up" class="anchor"></a><code><span><span class="keyword">method</span> wake_up : unit</span></code></div><div class="spec-doc"><p>Called when the source must be ready. Can be called multiple times</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-on_sleep"><a href="#method-on_sleep" class="anchor"></a><code><span><span class="keyword">method</span> on_sleep : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Register a callback when sleep is called.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-sleep"><a href="#method-sleep" class="anchor"></a><code><span><span class="keyword">method</span> sleep : unit</span></code></div><div class="spec-doc"><p>Called when the source can release all its resources. Can be called concurrently and multiple times.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-force_sleep"><a href="#method-force_sleep" class="anchor"></a><code><span><span class="keyword">method</span> force_sleep : unit</span></code></div><div class="spec-doc"><p>Force the source to sleep. Should be called by the clocks only.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-is_up"><a href="#method-is_up" class="anchor"></a><code><span><span class="keyword">method</span> is_up : bool</span></code></div><div class="spec-doc"><p>Check if a source is up or not.</p></div></div><h2 id="streaming"><a href="#streaming" class="anchor"></a>Streaming</h2><div class="odoc-spec"><div class="spec method anchored" id="method-frame_type"><a href="#method-frame_type" class="anchor"></a><code><span><span class="keyword">method</span> frame_type : <a href="../../Type/index.html#type-t">Type.t</a></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-content_type_computation_allowed"><a href="#method-content_type_computation_allowed" class="anchor"></a><code><span><span class="keyword">method</span> content_type_computation_allowed : unit</span></code></div><div class="spec-doc"><p>This is called when content-type can be computed, i.e. either after frame type has been passed from the typing system during `check_eval` or at `wake_up`</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-has_content_type"><a href="#method-has_content_type" class="anchor"></a><code><span><span class="keyword">method</span> has_content_type : bool</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-content_type"><a href="#method-content_type" class="anchor"></a><code><span><span class="keyword">method</span> content_type : <a href="../../Frame/index.html#type-content_type">Frame.content_type</a></span></code></div><div class="spec-doc"><p>What type of content does this source produce.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-audio_channels"><a href="#method-audio_channels" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> audio_channels : int</span></code></div><div class="spec-doc"><p>This method fails when content is not PCM.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-video_dimensions"><a href="#method-video_dimensions" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> video_dimensions : int * int</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-buffer"><a href="#method-buffer" class="anchor"></a><code><span><span class="keyword">method</span> buffer : <a href="../../Generator/index.html#type-t">Generator.t</a></span></code></div><div class="spec-doc"><p>A buffer that can be used by the source.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-generate_video"><a href="#method-generate_video" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> generate_video : <span><span class="optlabel">?create</span>:
                                  <span>(<span><span class="label">pos</span>:int <span class="arrow">&#45;&gt;</span></span>
                                    <span><span class="label">width</span>:int <span class="arrow">&#45;&gt;</span></span>
                                    <span><span class="label">height</span>:int <span class="arrow">&#45;&gt;</span></span>
                                    <span>unit <span class="arrow">&#45;&gt;</span></span>
                                    <span class="xref-unresolved">Mm</span>.Video.Canvas.image)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">field</span>:<a href="../../Frame/Fields/index.html#type-field">Frame.Fields.field</a> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <a href="../../Content/Video/index.html#type-data">Content.Video.data</a></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-last_image"><a href="#method-last_image" class="anchor"></a><code><span><span class="keyword">method</span> last_image : <span><a href="../../Frame/Fields/index.html#type-field">Frame.Fields.field</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Mm</span>.Video.Canvas.image</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-nearest_image"><a href="#method-nearest_image" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> nearest_image : <span><span class="label">pos</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">last_image</span>:<span class="xref-unresolved">Mm</span>.Video.Canvas.image <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Content/Video/index.html#type-data">Content.Video.data</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Mm</span>.Video.Canvas.image</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-empty_frame"><a href="#method-empty_frame" class="anchor"></a><code><span><span class="keyword">method</span> empty_frame : <a href="../../Frame/index.html#type-t">Frame.t</a></span></code></div><div class="spec-doc"><p>An empty frame that can be used by the source.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-end_of_track"><a href="#method-end_of_track" class="anchor"></a><code><span><span class="keyword">method</span> end_of_track : <a href="../../Frame/index.html#type-t">Frame.t</a></span></code></div><div class="spec-doc"><p>An empty frame with a track mark.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-remaining"><a href="#method-remaining" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">virtual</span> remaining : int</span></code></div><div class="spec-doc"><p>Number of main ticks left in the current track. Defaults to -1=unknown.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-elapsed"><a href="#method-elapsed" class="anchor"></a><code><span><span class="keyword">method</span> elapsed : int</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-duration"><a href="#method-duration" class="anchor"></a><code><span><span class="keyword">method</span> duration : int</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-seek_source"><a href="#method-seek_source" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">virtual</span> seek_source : <a href="#">source</a></span></code></div><div class="spec-doc"><p>Return the source effectively used to seek. Used by the muxer to determine if there is a unique seeking source. Should return <code>self</code> if there isn't such a unique source.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-seek"><a href="#method-seek" class="anchor"></a><code><span><span class="keyword">method</span> seek : <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>self#seek_ticks x</code> skips <code>x</code> main ticks. returns the number of ticks actually skipped. By default it always returns 0, refusing to seek at all. That method may be called from any thread, concurrently with <code>#get_frame</code>, so they should not interfere.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-last_metadata"><a href="#method-last_metadata" class="anchor"></a><code><span><span class="keyword">method</span> last_metadata : <span><a href="../../Frame/index.html#type-metadata">Frame.metadata</a> option</span></span></code></div><div class="spec-doc"><p>The source's last metadata.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-reset_last_metadata_on_track"><a href="#method-reset_last_metadata_on_track" class="anchor"></a><code><span><span class="keyword">method</span> reset_last_metadata_on_track : bool</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-set_reset_last_metadata_on_track"><a href="#method-set_reset_last_metadata_on_track" class="anchor"></a><code><span><span class="keyword">method</span> set_reset_last_metadata_on_track : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-register_command"><a href="#method-register_command" class="anchor"></a><code><span><span class="keyword">method</span> register_command : <span><span class="optlabel">?usage</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">descr</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Register a server command. The command is registered when the source wakes up under its own id as namespace and deregistered when it goes down.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-on_metadata"><a href="#method-on_metadata" class="anchor"></a><code><span><span class="keyword">method</span> on_metadata : <span><span>(<span><a href="../../Frame/index.html#type-metadata">Frame.metadata</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Register a callback to be called on new metadata</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-on_track"><a href="#method-on_track" class="anchor"></a><code><span><span class="keyword">method</span> on_track : <span><span>(<span><a href="../../Frame/index.html#type-metadata">Frame.metadata</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Register a callback to be called on new track. Callback is called with the most recent metadata before a given track mark.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-execute_on_track"><a href="#method-execute_on_track" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> execute_on_track : <span><a href="../../Frame/index.html#type-t">Frame.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>These two are used by <code>generate_from_multiple_sources</code> and should not be used otherwise.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-set_last_metadata"><a href="#method-set_last_metadata" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> set_last_metadata : <span><a href="../../Frame/index.html#type-t">Frame.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-can_generate_frame"><a href="#method-can_generate_frame" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> <span class="keyword">virtual</span> can_generate_frame : bool</span></code></div><div class="spec-doc"><p>Sources must implement this method. It should return <code>true</code> when the source can produce data during the current streaming cycle.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-on_before_streaming_cycle"><a href="#method-on_before_streaming_cycle" class="anchor"></a><code><span><span class="keyword">method</span> on_before_streaming_cycle : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-on_after_streaming_cycle"><a href="#method-on_after_streaming_cycle" class="anchor"></a><code><span><span class="keyword">method</span> on_after_streaming_cycle : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-generate_frame"><a href="#method-generate_frame" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> <span class="keyword">virtual</span> generate_frame : <a href="../../Frame/index.html#type-t">Frame.t</a></span></code></div><div class="spec-doc"><p>Sources must implement this method. It should return the data produced during the current streaming cycle. Sources are responsible for producing as much data as possible, up-to the frame size setting.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-is_ready"><a href="#method-is_ready" class="anchor"></a><code><span><span class="keyword">method</span> is_ready : bool</span></code></div><div class="spec-doc"><p>This method is based on <code>can_generate_frame</code> and has the same value through the whole streaming cycle.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-get_frame"><a href="#method-get_frame" class="anchor"></a><code><span><span class="keyword">method</span> get_frame : <a href="../../Frame/index.html#type-t">Frame.t</a></span></code></div><div class="spec-doc"><p>If the source is ready, this method computes the frame generated by the source during the current streaming cycle. Returned value is cached and should be the same throughout the whole streaming cycle.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-get_partial_frame"><a href="#method-get_partial_frame" class="anchor"></a><code><span><span class="keyword">method</span> get_partial_frame : <span><span>(<span><a href="../../Frame/index.html#type-t">Frame.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Frame/index.html#type-t">Frame.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../Frame/index.html#type-t">Frame.t</a></span></code></div><div class="spec-doc"><p>This method passes the frame returned by <code>#get_frame</code> to the given callback. The callback should return the portion of the frame (of the form: <code>start, end))
           that was effectively used. This method is used when a consumer of the source's data
           only uses an initial chunk of the frame. In this case, the remaining data is cached
           whenever possible and returned during the next streaming cycle. Final returned value
           is the same as the partial chunk returned from the callback for easy method call chaining.
           Calling this method is equivalent to doing: {[
             let frame = Frame.slice source#peek_frame len in
             source#consumed (Frame.position frame);
             frame
           ]} </code></p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-peek_frame"><a href="#method-peek_frame" class="anchor"></a><code><span><span class="keyword">method</span> peek_frame : <a href="../../Frame/index.html#type-t">Frame.t</a></span></code></div><div class="spec-doc"><p>Check a frame without consuming any of its data.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-consumed"><a href="#method-consumed" class="anchor"></a><code><span><span class="keyword">method</span> consumed : <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Manually mark amount of consumed data from the source.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-get_mutable_content"><a href="#method-get_mutable_content" class="anchor"></a><code><span><span class="keyword">method</span> get_mutable_content : <span><a href="../../Frame/index.html#type-field">Frame.field</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Content/index.html#type-data">Content.data</a></span></code></div><div class="spec-doc"><p>This method requests a specific field of the frame that can be mutated. It is used by a consumer of the source that will modify the source's data (e.g. <code>amplify</code>). The source will do its best to minimize data copy according to the streaming context. Typically, if there is only one consumer of the source's data, it should be safe to pass its data without copying it.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-get_mutable_frame"><a href="#method-get_mutable_frame" class="anchor"></a><code><span><span class="keyword">method</span> get_mutable_frame : <span><a href="../../Frame/index.html#type-field">Frame.field</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Frame/index.html#type-t">Frame.t</a></span></code></div><div class="spec-doc"><p>This method is the same as <code>#get_mutable_content</code> but returns a full frame with the requested mutable field included.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-split_frame"><a href="#method-split_frame" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">private</span> split_frame : <span><a href="../../Frame/index.html#type-t">Frame.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Frame/index.html#type-t">Frame.t</a> * <span><a href="../../Frame/index.html#type-t">Frame.t</a> option</span></span></code></div><div class="spec-doc"><p>By convention, frames produced during the streaming cycle can only have at most one track mark. In case of multiple track marks (which most likely indicate a programming problem), all subsequent track marks past the first one are dropped.</p><p>This function returns a pair: <code>(initial_frame, new_track option)</code> of an initial frame and, if a track mark is present in the frame, the optional portion of the frame contained after this track mark.</p><p>This method can be used to implement operations that should be aware of new tracks.</p></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-set_frame_data"><a href="#method-set_frame_data" class="anchor"></a><code><span><span class="keyword">method</span> set_frame_data : <span><a href="../../Frame/index.html#type-field">Frame.field</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="optlabel">?offset</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?length</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../Content/index.html#type-data">Content.data</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../Frame/index.html#type-t">Frame.t</a></span></code></div><div class="spec-doc"><p>This method is a convenience function to set some data. It returns the frame produced by the source during the current streaming cycle with the given field data replaced by the data passed to the function with length set as the frame's length.</p></div></div><p>Various information related to the current frame.</p><div class="odoc-spec"><div class="spec method anchored" id="method-frame_position"><a href="#method-frame_position" class="anchor"></a><code><span><span class="keyword">method</span> frame_position : int</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-frame_audio_position"><a href="#method-frame_audio_position" class="anchor"></a><code><span><span class="keyword">method</span> frame_audio_position : int</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-frame_has_track_mark"><a href="#method-frame_has_track_mark" class="anchor"></a><code><span><span class="keyword">method</span> frame_has_track_mark : bool</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-frame_track_mark"><a href="#method-frame_track_mark" class="anchor"></a><code><span><span class="keyword">method</span> frame_track_mark : <span>int option</span></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-frame_metadata"><a href="#method-frame_metadata" class="anchor"></a><code><span><span class="keyword">method</span> frame_metadata : <span><span>(int * <a href="../../Frame/Metadata/index.html#type-t">Frame.Metadata.t</a>)</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-abort_track"><a href="#method-abort_track" class="anchor"></a><code><span><span class="keyword">method</span> <span class="keyword">virtual</span> abort_track : unit</span></code></div><div class="spec-doc"><p>Tells the source to end its current track.</p></div></div><h2 id="utilities"><a href="#utilities" class="anchor"></a>Utilities</h2><div class="odoc-spec"><div class="spec method anchored" id="method-log"><a href="#method-log" class="anchor"></a><code><span><span class="keyword">method</span> log : <a href="../../Log/index.html#type-t">Log.t</a></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-add_watcher"><a href="#method-add_watcher" class="anchor"></a><code><span><span class="keyword">method</span> add_watcher : <span><a href="../index.html#type-watcher">watcher</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>
