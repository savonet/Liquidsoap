<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Source (liquidsoap_core@8e9bf4542caf.Source)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">liquidsoap_core@8e9bf4542caf</a> &#x00BB; Source</nav><header class="odoc-preamble"><h1>Module <code><span>Source</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-sync"><a href="#type-sync" class="anchor"></a><code><span><span class="keyword">type</span> sync</span><span> = </span><span>[ </span></code><ol><li id="type-sync.Auto" class="def variant constructor anchored"><a href="#type-sync.Auto" class="anchor"></a><code><span>| </span><span>`Auto</span></code></li><li id="type-sync.CPU" class="def variant constructor anchored"><a href="#type-sync.CPU" class="anchor"></a><code><span>| </span><span>`CPU</span></code></li><li id="type-sync.None" class="def variant constructor anchored"><a href="#type-sync.None" class="anchor"></a><code><span>| </span><span>`None</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>In <code>`CPU</code> mode, synchronization is governed by the CPU clock. * In <code>`None</code> mode, there is no synchronization control. Latency in * is governed by the time it takes for the sources to produce and * output data. * In <code>`Auto</code> mode, synchronization is governed by the CPU unless at * least one active source is declared <code>self_sync</code> in which case latency * is delegated to this source. A typical example being a source linked * to a sound card, in which case the source latency is governed * by the sound card's clock. Another case is synchronous network * protocol such as <code>input.srt</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-active"><a href="#type-active" class="anchor"></a><code><span><span class="keyword">type</span> active</span><span> = <span>&lt; reset : unit ; output : unit &gt;</span></span></code></div><div class="spec-doc"><p>A source can be: passive, active or output. Active sources and outputs are animated on each clock cycle. Output are kept around until they are manually shutdown. Active and passive sources can be garbage collected if they are not connected to any output. The <code>output</code> method is called on each clock cycle on active sources and outputs. The <code>reset</code> method is called when there is too much latency.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-source_type"><a href="#type-source_type" class="anchor"></a><code><span><span class="keyword">type</span> source_type</span><span> = </span><span>[ </span></code><ol><li id="type-source_type.Passive" class="def variant constructor anchored"><a href="#type-source_type.Passive" class="anchor"></a><code><span>| </span><span>`Passive</span></code></li><li id="type-source_type.Active" class="def variant constructor anchored"><a href="#type-source_type.Active" class="anchor"></a><code><span>| </span><span>`Active <span class="keyword">of</span> <a href="#type-active">active</a></span></code></li><li id="type-source_type.Output" class="def variant constructor anchored"><a href="#type-source_type.Output" class="anchor"></a><code><span>| </span><span>`Output <span class="keyword">of</span> <a href="#type-active">active</a></span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Unavailable"><a href="#exception-Unavailable" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Unavailable</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-streaming_state"><a href="#type-streaming_state" class="anchor"></a><code><span><span class="keyword">type</span> streaming_state</span><span> = </span><span>[ </span></code><ol><li id="type-streaming_state.Pending" class="def variant constructor anchored"><a href="#type-streaming_state.Pending" class="anchor"></a><code><span>| </span><span>`Pending</span></code></li><li id="type-streaming_state.Unavailable" class="def variant constructor anchored"><a href="#type-streaming_state.Unavailable" class="anchor"></a><code><span>| </span><span>`Unavailable</span></code></li><li id="type-streaming_state.Ready" class="def variant constructor anchored"><a href="#type-streaming_state.Ready" class="anchor"></a><code><span>| </span><span>`Ready <span class="keyword">of</span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></li><li id="type-streaming_state.Done" class="def variant constructor anchored"><a href="#type-streaming_state.Done" class="anchor"></a><code><span>| </span><span>`Done <span class="keyword">of</span> <a href="../Frame/index.html#type-t">Frame.t</a></span></code></li></ol><code><span> ]</span></code></div></div><p>Instrumentation.</p><div class="odoc-spec"><div class="spec type anchored" id="type-metadata"><a href="#type-metadata" class="anchor"></a><code><span><span class="keyword">type</span> metadata</span><span> = <span><span>(int * <a href="../Frame/index.html#type-metadata">Frame.metadata</a>)</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-watcher"><a href="#type-watcher" class="anchor"></a><code><span><span class="keyword">type</span> watcher</span><span> = </span><span>{</span></code><ol><li id="type-watcher.wake_up" class="def record field anchored"><a href="#type-watcher.wake_up" class="anchor"></a><code><span>wake_up : <span><span class="label">fallible</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source_type</span>:<a href="#type-source_type">source_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">id</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ctype</span>:<a href="../Frame/index.html#type-content_type">Frame.content_type</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">clock_id</span>:string <span class="arrow">&#45;&gt;</span></span>
  unit;</span></code></li><li id="type-watcher.sleep" class="def record field anchored"><a href="#type-watcher.sleep" class="anchor"></a><code><span>sleep : <span>unit <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li><li id="type-watcher.generate_frame" class="def record field anchored"><a href="#type-watcher.generate_frame" class="anchor"></a><code><span>generate_frame : <span><span class="label">start_time</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">end_time</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">length</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">has_track_mark</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">metadata</span>:<a href="#type-metadata">metadata</a> <span class="arrow">&#45;&gt;</span></span>
  unit;</span></code></li><li id="type-watcher.before_streaming_cycle" class="def record field anchored"><a href="#type-watcher.before_streaming_cycle" class="anchor"></a><code><span>before_streaming_cycle : <span>unit <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li><li id="type-watcher.after_streaming_cycle" class="def record field anchored"><a href="#type-watcher.after_streaming_cycle" class="anchor"></a><code><span>after_streaming_cycle : <span>unit <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-source"><a href="#class-source" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> </span><span><a href="class-source/index.html">source</a></span><span> : <span><span class="optlabel">?stack</span>:<span><a href="../Pos/index.html#type-t">Pos.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?clock</span>:<a href="../Clock/index.html#type-t">Clock.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?name</span>:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The <code>source</code> use is to send data frames through the <code>get</code> method.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-active_source"><a href="#class-active_source" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> </span><span><a href="class-active_source/index.html">active_source</a></span><span> : <span><span class="optlabel">?stack</span>:<span><a href="../Pos/index.html#type-t">Pos.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?clock</span>:<a href="../Clock/index.html#type-t">Clock.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?name</span>:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-operator"><a href="#class-operator" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> </span><span><a href="class-operator/index.html">operator</a></span><span> : <span><span class="optlabel">?stack</span>:<span><a href="../Pos/index.html#type-t">Pos.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?clock</span>:<a href="../Clock/index.html#type-t">Clock.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="class-source/index.html">source</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-active_operator"><a href="#class-active_operator" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> </span><span><a href="class-active_operator/index.html">active_operator</a></span><span> : <span><span class="optlabel">?stack</span>:<span><a href="../Pos/index.html#type-t">Pos.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?clock</span>:<a href="../Clock/index.html#type-t">Clock.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="class-source/index.html">source</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-reselect"><a href="#type-reselect" class="anchor"></a><code><span><span class="keyword">type</span> reselect</span><span> = </span><span>[ </span></code><ol><li id="type-reselect.Ok" class="def variant constructor anchored"><a href="#type-reselect.Ok" class="anchor"></a><code><span>| </span><span>`Ok</span></code></li><li id="type-reselect.Force" class="def variant constructor anchored"><a href="#type-reselect.Force" class="anchor"></a><code><span>| </span><span>`Force</span></code></li><li id="type-reselect.After_position" class="def variant constructor anchored"><a href="#type-reselect.After_position" class="anchor"></a><code><span>| </span><span>`After_position <span class="keyword">of</span> int</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Type governing whether or not the same source should be re-selected.</p><ul><li><code>`Force</code> means that the operator should at least try to see if a new source should be selected.</li><li><code>`Ok</code> means that the operator should re-select the current source whenever possible.</li><li><code>`After_position p</code> means that the operator should re-select the current source only if it can produce data past the given position The <code>generate_from_multiple_sources</code> implements a <code>can_reselect</code> that can be called with the currently selected source to validate this logic.</li></ul></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-generate_from_multiple_sources"><a href="#class-generate_from_multiple_sources" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> </span><span><a href="class-generate_from_multiple_sources/index.html">generate_from_multiple_sources</a></span><span> : <span><span class="label">merge</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span>
  bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">track_sensitive</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span>
  bool)</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
